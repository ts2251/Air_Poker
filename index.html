<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>エアポーカー</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ルール説明等の微調整CSS */
        .rule-box ul { list-style: none; padding: 0; margin: 0; }
        .rule-box li { margin-bottom: 8px; padding-bottom: 4px; border-bottom: 1px dashed rgba(255, 255, 255, 0.2); font-size: 0.95em; line-height: 1.6; }
        .rule-box li:last-child { border-bottom: none; }
        .rule-section-title { color: #00d2ff; font-size: 1.1em; font-weight: bold; border-left: 4px solid #00d2ff; padding-left: 10px; margin-top: 15px; margin-bottom: 8px; text-shadow: 0 0 5px rgba(0, 210, 255, 0.5); }
        .rule-section-title.danger { color: #ff4757; border-left-color: #ff4757; text-shadow: 0 0 5px rgba(255, 71, 87, 0.5); }
        .keyword { color: #f1c40f; font-weight: bold; }
        .value { color: #ffffff; font-weight: bold; font-family: monospace; font-size: 1.1em; }
        .alert-text { color: #ff6b81; font-weight: bold; }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="ai-area" class="player-area">
            <h2 id="ai-name-display">AI</h2>
            <div class="status-row">
                <span>Wins: <span id="ai-wins">0</span></span>
                <span class="chip-count">AIR: <span id="ai-chips">30</span></span>
            </div>
            <div id="ai-numbers" class="number-container"></div>
            <div id="ai-hand" class="card-container" style="display:none;"></div>
        </div>

        <div id="info-area">
            <div id="oxygen-container" style="width: 80%; margin: 0 auto 10px auto; display:none;">
                <div style="text-align: left; font-size: 0.8em; color: #3498db; margin-bottom: 2px;">OXYGEN SUPPLY</div>
                <div class="progress-bar-bg">
                    <div id="oxygen-bar" class="progress-bar-fill"></div>
                </div>
            </div>

            <div id="battle-area" class="battle-area" style="opacity: 0;">
                <div class="battle-token-container">
                    <span class="battle-label">AI</span>
                    <div id="battle-token-ai" class="card token enemy">?</div>
                </div>
                <div class="vs-text">VS</div>
                <div class="battle-token-container">
                    <span class="battle-label">YOU</span>
                    <div id="battle-token-human" class="card token">?</div>
                </div>
            </div>

            <div id="start-screen">
                <h1 class="title-logo">AIR POKER</h1>
                <div class="rule-box">
                    <div class="rule-section-title">ルール概要</div>
                    <ul>
                        <li><span class="keyword">初期エア(AIR):</span> <span class="value">30</span> <span style="font-size:0.8em; color:#ccc;">(1 AIR ≈ 45秒の呼吸分)</span></li>
                        <li><span class="keyword">参加料(Ante):</span> ラウンド数と同じ額 <span class="value">(R1=1, R2=2...)</span></li>
                        <li><span class="keyword">勝利条件:</span> 相手のエアを尽きさせる</li>
                    </ul>
                    <div class="rule-section-title">Betの取り決め</div>
                    <ul>
                        <li>カード(数字)オープン後にBet開始</li>
                        <li>先攻はラウンドごとに交代</li>
                        <li><span class="keyword">レイズ上限:</span> 場にある総額(POT)の<span class="value">半分</span>まで</li>
                        <li><span class="keyword">Bet上限:</span> エアの少ない方の所持数まで</li>
                    </ul>
                    <div class="rule-section-title danger">天災 (TENSAI)</div>
                    <ul>
                        <li>両者が<span class="alert-text">同じカード構成</span>で役を作っていた場合発生</li>
                        <li>敗者は <span class="alert-text" style="border-bottom: 1px solid red;">賭け額と同等のエアを追加で失う</span></li>
                    </ul>
                </div>
                <div style="margin-top: 20px;">
                    難易度: 
                    <select id="difficulty-select" style="font-size: 18px; padding: 5px;">
                        <option value="EASY" style="color:rgb(75, 189, 227);">EASY</option>
                        <option value="NORMAL" style="color:rgb(7, 179, 7);" selected>NORMAL</option>
                        <option value="HARD" style="color:red;">HARD</option>
                        <option value="GOD" style="color:gold; font-weight:bold; text-shadow: 1px 1px 0 #000;">GOD</option>
                    </select>
                </div>
                <br>
                <button id="start-btn" class="start-button">GAME START</button>
            </div>

            <div id="pot-display" style="display:none;">POT: <span id="pot-amount">0</span></div>
            
            <div id="message-box"></div>

            <div id="bet-controls" style="display:none;">
                <div class="bet-info">
                    <div>相手のBet: <span id="current-enemy-bet" class="highlight-red">0</span></div>
                    <div>Call必要額: <span id="amount-to-call" class="highlight-yellow">0</span></div>
                    <div>Raise上限: <span id="raise-limit" class="highlight-green">0</span></div>
                </div>
                <div class="bet-input-area">
                    <button id="btn-minus">-</button>
                    <input type="number" id="bet-input" value="0" readonly>
                    <button id="btn-plus">+</button>
                </div>
                <div class="bet-actions">
                    <button id="btn-fold" class="btn-fold">FOLD</button>
                    <button id="btn-confirm" class="btn-confirm">BET!</button>
                </div>
            </div>

            <button id="next-round-btn" style="display:none;">次のラウンドへ</button>
        </div>

        <div id="player-area" class="player-area">
            <div id="player-hand" class="card-container" style="display:none;"></div>
            <div id="player-numbers" class="number-container"></div>
            <div class="status-row">
                <span>Wins: <span id="player-wins">0</span></span>
                <span class="chip-count">AIR: <span id="player-chips">30</span></span>
            </div>
            <h2>YOU</h2>
        </div>
    </div>
    
    <div id="thunder-overlay" class="thunder-overlay"></div>

    <script type="module" src="src/main.js"></script>
</body>
</html>